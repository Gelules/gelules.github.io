<!DOCTYPE HTML>
<html lang="fr" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cas pratique avec GitHub - Pédiluve</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pédiluve</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cas-pratique-avec-github"><a class="header" href="#cas-pratique-avec-github">Cas pratique avec GitHub</a></h1>
<p>Le but de git, c'est de sauvegarder chaque nouvelle fonctionnalité de ton projet
dans un commit. Des que tu ajoutes quelque chose, que tu l'as testé et qu'il
fonctionne, alors tu fais un commit.</p>
<p>Et si tu utilises une remote, alors tu veux en plus <strong>pousser</strong> tes sauvegardes
dessus.</p>
<p>Tu vas ici apprendre à utiliser git avec GitHub.</p>
<h2 id="création-du-compte"><a class="header" href="#création-du-compte">Création du compte</a></h2>
<p>Tout d'abord, crée un compte sur <a href="https://github.com">GitHub</a></p>
<h2 id="clés-ssh"><a class="header" href="#clés-ssh">Clés SSH</a></h2>
<p>Pour que tu puisses utiliser ton dépôt, tu dois créer des clés SSH. Tu vas créer
deux clés, une clé privée, qui comme son nom l'indique doit rester privée, et
une clé publique, que tu peux montrer à tout le monde.</p>
<p>Quand tu installeras ta clé publique sur GitHub, il y aura une opération
cryptographique entre ta clé privée et la clé publique pour assurer que tu as
les droits de pousser ton travail sur GitHub.</p>
<p>Ca semble compliqué dit comme ça, ne t'inquiète pas, tout est transparant pour
toi, tu n'auras rien à faire une fois que tout est installé.</p>
<p>Va dans ton <strong>HOME</strong> et crée le répertoire <strong>.ssh</strong>. Dedans, crée les clés SSH.</p>
<pre><code class="language-text">$ cd
$ mkdir .ssh
$ cd .ssh
$ ssh-keygen -t ed25519
</code></pre>
<p>Là, un prompt te demande comment tu veux appeler ta clé. Appelle la <strong>github</strong>.</p>
<p>Ensuite, un prompt te demande si tu veux mettre un mot de passe à ta clé. C'est
une sécurité en plus. A chaque fois que tu feras appel à cette clé pour faire
une connexion avec la remote de GitHub, tu devras rentrer ce mot de passe.</p>
<p>Met un mot de passe si tu veux.</p>
<p><strong>ATTENTION</strong>, si tu veux absolument mettre un mot de passe, alors je te
conseille de changer la génération de tes clés avec cette commande</p>
<pre><code class="language-text">$ ssh-keygen -t ed25519 -a 100
</code></pre>
<p>La différence est qu'il y aura une centaine de passages sur ta clé avec un
chiffrement particulier. Par défaut la valeur est 16. 100 est une assez bonne
valeur pour augmenter la robustesse de la clé si quelqu'un te la vole et tente
de casser le mot de passe avec une attaque bruteforce sans que ça ralentisse
trop les vérifications de mot de passe à chaque utilisation de la clé.</p>
<p>Maintenant que tu as crées les clés, tu vas créer dans le répertoire ~/.ssh/ le
fichier config que tu vas configurer pour la connexion à GitHub.</p>
<pre><code class="language-text">$ cat ~/.ssh/config
Host github.com
    Hostname github.com
    User git
    IdentityFile ~/.ssh/github
$
</code></pre>
<p>Laisse <strong>git</strong> dans la partie <strong>User</strong>.</p>
<p>Tu as deux clés. <strong>github</strong> et <strong>github.pub</strong>. La première est la clé privée, la
seconde la clé publique.</p>
<p>Dans GitHub, dirige toi dans <a href="https://github.com/settings/keys">Settings &gt; Access &gt; SSH and GPG keys</a></p>
<p>Clique sur <strong>New SSH key</strong>. Donne lui un nom, le nom de ton PC par exemple, et
colle la clé publique dans le champ prévu à cet effet. Sauvegarde en cliquant
sur <strong>Add SSH key</strong>.</p>
<p>Tu vas maintenant tester la connexion.</p>
<pre><code class="language-text">$ ssh -T git@github.com
The authenticity of host 'github.com (IP ADDRESS)' can't be established.
ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.
Are you sure you want to continue connecting (yes/no)?
</code></pre>
<p>Ecris <strong>yes</strong> et appuie sur Entrée.</p>
<pre><code class="language-text">Hi Gelules! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>
<p>Evidemment tu devrais voir ton login à la place du mien.</p>
<h2 id="création-du-projet"><a class="header" href="#création-du-projet">Création du projet</a></h2>
<p>Retourne sur l'accueil de <a href="https://github.com">GitHub</a>.</p>
<p>En haut à gauche, il y a un bouton vert <strong>New</strong>. Clique dessus pour créer un
nouveau distant. Appelle le <strong>file_creator</strong>. Tu peux le rendre publique ou
privée au choix.</p>
<p><img src="./github/create_project.png" alt="Création du projet sur GitHub" title="Création du projet sur GitHub" /></p>
<p>Crée le projet.</p>
<h2 id="clone-du-projet"><a class="header" href="#clone-du-projet">Clone du projet</a></h2>
<p>Te voilà maintenant sur le projet, vide.</p>
<p>Tu as au milieu une partie <em>Quick setup</em> avec deux boutons, HTTPS et SSH. Clique
sur <strong>SSH</strong>. Copie le lien qui est inscrit. Le mien ressemble à ceci :
git@github.com:Gelules/file_creator.git</p>
<p>Retourne dans ton <strong>HOME</strong> et exécute la commande suivante :</p>
<pre><code class="language-text">$ git clone git@github.com:Gelules/file_creator.git
...
$ cd file_creator
</code></pre>
<p>Remplace le lien par le tien, évidemment.</p>
<h2 id="retour-au-projet"><a class="header" href="#retour-au-projet">Retour au projet</a></h2>
<p>Le projet, créer un générateur de fichiers. Le même que tu as fait dans les
chapitres de shell, mais on va ici le construire petit à petit et faire un
commit à chaque nouvelle fonctionnalité.</p>
<p>Tu vas recréer le fichier <strong>file_creator.sh</strong> et <strong>README</strong>, vides. Les ajouter
et les commit avec le message <strong>initial commit</strong>.</p>
<h2 id="push"><a class="header" href="#push">push</a></h2>
<p>Maintenant que tu es retourné à l'état du chapitre précédent, tu vas pousser tes
fichiers vides.</p>
<pre><code class="language-text">$ git push
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Delta compression using up to 4 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 233 bytes | 233.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
To github.com:Gelules/file_creator.git
 * [new branch]      main -&gt; main
$
</code></pre>
<p>Retourne sur GitHub, et rafraichis la page. Surprise ! Tes fichiers y sont.
Toujours vides.</p>
<h2 id="avancement"><a class="header" href="#avancement">Avancement</a></h2>
<p>Comme je te l'avais dit, git suit ce qu'on appelle le <em>execution bit</em>, le bit
qui indique qu'un fichier est exécutable ou non.</p>
<p>Pour le voir par l'exemple, tu vas rendre <strong>file_creator.sh</strong> exécutable,
exécuter <strong>git status</strong>, tu verras qu'il t'indique d'ajouter le fichier.</p>
<p>Rends le exécutable, ajoute le, crée un commit pour indiquer que le fichier doit
être exécutable et pousse ton travail.</p>
<pre><code class="language-text">$ chmod +x file_creator.sh
$ git status
$ git add file_creator.sh
$ git commit -m "file_creator must be executable"
$ git push
$ git log
</code></pre>
<p>Dans les logs, tu peux voir que les commits montent à chaque nouvelle
sauvegarde.</p>
<p>Tu peux voir à la fin du premier commit que la <strong>HEAD</strong> est sur la branche
<strong>main</strong>, qui est la branche par défaut sur git, et que la branche <strong>main</strong> de
la remote <strong>origin</strong> est aussi sur le dernier commit : tu es à jour sur ton
dépôt local et sur la remote.</p>
<p>Voilà, tu as ici l'utilisation moyenne de git. Tu modifies, tu vérifies que tout
aille bien</p>
<p>Tu vas commencer par un script qui genère des fichiers qui suivent ce pattern :
test_NUMERO.txt allant de 0 à 10.</p>
<pre><code class="language-sh">#!/bin/sh

i=0
while [ $i -le 10 ]
do
    touch test_${i}.txt
done
</code></pre>
<p>En temps normal, tu dois tester ta nouvelle fonctionnalité.
Quand tous tes tests sont bons, alors tu peux commit ton travail.</p>
<p>Que manque t-il ici ? L'incrémentation de <strong>i</strong> à chaque création de fichier. Je
te laisse faire le changement nécessaire.</p>
<p>Ajoute dans le README un message pour indiquer comment utiliser ton projet.</p>
<pre><code class="language-text">$ cat README
file_generator is a super project to generate a lot of files with different
extensions. For now it's only able to generate 10 test files.
$ git add file_generator.sh README
$ git commit -m "generate 10 tests file"
$ git log
</code></pre>
<p>Tu peux le voir, ta remote est maintenant en retard d'un commit. Pousse ton
travail pour que tout soit à jour.</p>
<pre><code class="language-text">$ git push
</code></pre>
<h3 id="nom-de-fichiers"><a class="header" href="#nom-de-fichiers">Nom de fichiers</a></h3>
<p>Tu vas maintenant modifier le script pour qu'il gère un nom de fichier différent
selon le paramètre que tu envoies.</p>
<pre><code class="language-sh">#!/bin/sh

if [ $# -ne 1 ]
then
    echo "Usage: $0 FILENAME" &gt;&amp;2
    exit 1
fi

filename=$1

i=0
while [ $i -le 10 ]
do
    touch ${filename}_${i}.txt
    $i=$((i + 1))
done
</code></pre>
<p>Modifie le README en conséquence.</p>
<p>Ajoute tes modifications à git, commit et pousse.</p>
<p>N'oublie pas d'utiliser <strong>git status</strong> et <strong>git log</strong> pour voir l'évolution.</p>
<h3 id="nombre-de-fichiers"><a class="header" href="#nombre-de-fichiers">Nombre de fichiers</a></h3>
<p>Nouvelle évolution : Tu vas maintenant avoir un script qui peut générer un
nombre de fichiers différents, qui part d'un nombre donné en paramètre et qui
termine sur un autre nombre donné en paramètre.</p>
<pre><code class="language-sh">#!/bin/sh

if [ $# -ne 3 ]
then
    echo "Usage: $0 FILENAME START STOP" &gt;&amp;2
    exit 1
fi

if [ "$stop" -le "$start" ]
then
    echo "START number must be greater than STOP number" 2&gt;
    exit 1
fi

filename=$1
start=$2
stop=$3

while [ "$start" -le "$stop" ]
do
    touch ${filename}_${start}.txt
    start=$((start + 1))
done
</code></pre>
<p>Modifie le README en conséquence.</p>
<p>Ajoute tes modifications à git, commit et pousse.</p>
<p>N'oublie pas d'utiliser <strong>git status</strong> et <strong>git log</strong> pour voir l'évolution.</p>
<h3 id="reclone"><a class="header" href="#reclone">reclone</a></h3>
<p>J'ai besoin que tu connaisses la commande <strong>git pull</strong>. Pour ça tu vas cloner
une deuxième fois ton dépôt ailleurs. Dans le répertoire <strong>/tmp</strong> par exemple.</p>
<p>Ouvre un deuxième terminal et effectue ces commandes.</p>
<pre><code class="language-text">$ cd /tmp
$ git clone git@github.com:Gelules/file_creator.git
...
$ cd file_creator
</code></pre>
<p>Tu viens de cloner ton dépôt dans le dernier état auquel tu avais poussé ton
travail.</p>
<p>Garde ce terminal de côté et retourne sur le premier.</p>
<h3 id="extension"><a class="header" href="#extension">Extension</a></h3>
<p>Tu vas ajouter la dernière modification. Tu vas demander à l'utilisateur de
donner une extension aux fichiers générés.</p>
<pre><code class="language-sh">#!/bin/sh

if [ $# -ne 4 ]
then
    echo "Usage: $0 FILENAME START STOP EXTENSION" &gt;&amp;2
    exit 1
fi

if [ "$stop" -le "$start" ]
then
    echo "START number must be greater than STOP number" 2&gt;
    exit 1
fi

filename=$1
start=$2
stop=$3
extension=$4

while [ "$start" -le "$stop" ]
do
    touch ${filename}_${start}.${extension}
    start=$((start + 1))
done
</code></pre>
<p>Modifie le README en conséquence.</p>
<p>Ajoute tes modifications à git, commit et pousse.</p>
<p>N'oublie pas d'utiliser <strong>git status</strong> et <strong>git log</strong> pour voir l'évolution.</p>
<h3 id="pull"><a class="header" href="#pull">pull</a></h3>
<p>Tu te souviens du deuxième terminal qui avait clone la remote ?</p>
<p>Ce répertoire n'est plus à jour avec la nouvelle modification ! Tu vas y
remédier.</p>
<p>Sur ton deuxième terminal :</p>
<pre><code class="language-text">$ git pull
...
$
</code></pre>
<p>Et voilà, tu as <strong>pull</strong> ta mise à jour.</p>
<p>Evidemment sur le même ordinateur ce n'est pas utile.</p>
<p>Mais si tu travailles sur plusieurs machines ou que tu es un groupe à plusieurs
personnes sur un projet, alors chacun pourra mettre à jour le projet ainsi.</p>
<p>Evidemment il peut y avoir des conflits si tout le monde touche au même fichier
en même temps, mais c'est un problème que tu apprendras à résoudre pendant tes
études.</p>
<p>Bravo ! Tu as terminé ton pédiluve sur git !</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../git/bases.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../c/introduction.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../git/bases.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../c/introduction.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
