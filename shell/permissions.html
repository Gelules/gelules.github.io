<!DOCTYPE HTML>
<html lang="fr" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Permissions - Pédiluve</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pédiluve</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="permissions"><a class="header" href="#permissions">Permissions</a></h1>
<h2 id="comprendre-les-permissions"><a class="header" href="#comprendre-les-permissions">Comprendre les permissions</a></h2>
<p>Tu te rappelles du <em>long listing format</em> de <strong>ls</strong> avec toutes ces informations
imbitables ? C'est le moment de les biter.</p>
<p>Reprenons dans répertoire Test vide.</p>
<pre><code class="language-text">$ touch fichier
$ mkdir repertoire
$ cp /bin/ls . # Si tu as une erreur, essaie avec /usr/bin/ls
$ ls -l
total 136
-rw-r--r-- 1 gelules wheel      0 Jul 20 21:29 fichier
-rwxr-xr-x 1 gelules wheel 129728 Jul 20 21:29 ls
drwxr-xr-x 2 gelules wheel   4096 Jul 20 21:29 repertoire
$
</code></pre>
<p>La commande <strong>cp</strong> copie le binaire /bin/ls dans '.', c'est à dire le répertoire
où tu te trouves.</p>
<p>Il est très probable que tu n'aies pas la même sortie. Déjà au niveau des dates
et des heures, mais aussi sur la colonne avec "wheel". Ne t'inquiète pas, tout
va bien.</p>
<p>Décortiquons tout ça.</p>
<p>La première colonne contient les informations sur le type de fichier et les
permissions du fichier. Rappelle toi, '-' signifie que c'est un simple fichier,
et 'd' signifie que c'est un répertoire (<strong>d</strong>irectory).</p>
<p>Ensuite, le reste de la colonne, prenons le fichier <strong>ls</strong> :</p>
<pre><code class="language-text">rwxr-xr-x
</code></pre>
<p>Il faut diviser ces 9 caractères en 3 groupes de 3 caractères.</p>
<div class="table-wrapper"><table><thead><tr><th>User</th><th>Group</th><th>Other</th></tr></thead><tbody>
<tr><td>rwx</td><td>r-x</td><td>r-x</td></tr>
</tbody></table>
</div>
<p>Avant d'expliquer les lettres, je dois expliquer les colonnes du tableau.</p>
<p><strong>User</strong> donne des informations sur l'utilisateur qui possède le fichier. Si on
relit la sortie de <strong>ls -l</strong> plus haut, on peut voir que l'utilisateur qui
possède le fichier est <strong>gelules</strong>.</p>
<p><strong>Group</strong> donne des informations sur le groupe qui possède le fichier. Si on
relit la sortie de <strong>ls -l</strong> plus haut, on peut voir que le groupe qui
possède le fichier est <strong>wheel</strong>.</p>
<p><strong>Other</strong> est le reste du monde qui n'est ni l'utilisateur gelules ni les
utilisateurs dans le groupe wheel.</p>
<p>Tu peux voir dans quel groupe tu es avec la commande <strong>group</strong>.</p>
<pre><code class="language-text">$ group
</code></pre>
<p>Revenons aux lettres.</p>
<p><strong>r</strong> signifie <strong>r</strong>ead, pour lecture.</p>
<p><strong>w</strong> signifie <strong>w</strong>rite, pour écriture.</p>
<p><strong>x</strong> signifie e<strong>x</strong>ecute, pour exécution.</p>
<p>L'utilisateur a le droit de lire, modifier et exécuter le binaire.</p>
<p>Le groupe a le droit de lire et exécuter le binaire.</p>
<p>Tous les autres ont le droit de lire et exécuter le binaire.</p>
<h2 id="changer-les-permissions"><a class="header" href="#changer-les-permissions">Changer les permissions</a></h2>
<p>Pour modifier les permissions, tu peux utiliser la commande <strong>chmod</strong>.</p>
<p>Mais avant ça, il va falloir revoir un peu la base 2.</p>
<div class="table-wrapper"><table><thead><tr><th>r</th><th>w</th><th>x</th></tr></thead><tbody>
<tr><td>1</td><td>0</td><td>1</td></tr>
</tbody></table>
</div>
<p>Tu peux voir ici, je demande à ce que les permissions du fichier donnent le
droit de lecture et d'exécution et interdisent le droit de modification. La
valeur de 101 en base 10 est... 5.</p>
<p>Il faut faire 3 fois cette gymnastique pour avoir 3 chiffres. Le 1er sera le
droit pour l'utilisateur, le 2eme les droits pour le groupe et le 3eme les
droits pour les autres.</p>
<p>Par exemple, je souhaite donner les permissions suivantes au fichier :
l'utilisateur peut lire, modifier et exécuter le fichier, le groupe peut lire et
modifier le fichier et les autres ne peuvent qu'exécuter le fichier.</p>
<div class="table-wrapper"><table><thead><tr><th>r</th><th>w</th><th>x</th><th>r</th><th>w</th><th>x</th><th>r</th><th>w</th><th>x</th></tr></thead><tbody>
<tr><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr>
</tbody></table>
</div>
<p>Il faut traduire par paquet de 3.</p>
<p>On a donc :</p>
<p>111 = 7</p>
<p>110 = 6</p>
<p>001 = 1</p>
<p>Le droit à appliquer sera 761.</p>
<pre><code class="language-text">$ chmod 761 ls
$ ls -l ls
-rwxrw---x 1 gelules wheel 129728 Jul 20 21:29 ls
$
</code></pre>
<p>Comme tu peux le voir, le fichier <strong>ls</strong> a vu ses permissions être modifiées.</p>
<p>Sache qu'un répertoire a des droits d'exécution. Le droit d'exécution d'un
répertoire permet de s'y <strong>cd</strong>.</p>
<p>Faisons un autre exemple.</p>
<pre><code class="language-text">$ chmod 300 repertoire
</code></pre>
<p>Maintenant je n'ai que les droits de mofidication et d'exécution sur le
répertoire <strong>repertoire</strong>.</p>
<pre><code class="language-text">$ nano repertoire/test
...
$ ls repertoire
ls: cannot open directory 'repertoire': Permission denied
$ cat repertoire/test
...
$
</code></pre>
<p>Tu ne peux pas afficher le contenu, mais tu peux quand même t'y déplacer et
modifier son contenu.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../shell/read_write_files.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../shell/tips_tricks.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../shell/read_write_files.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../shell/tips_tricks.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
